# Docker Kullanım Rehberi

## Aşama 1: Kurulum

### Docker Desktop Kurulumu
- Docker Desktop Windows sayfasından indirin.
- Kurulum sırasında "WSL 2" (Windows Subsystem for Linux 2) seçeneğini işaretleyin.
- Kurulum tamamlandıktan sonra bilgisayarı yeniden başlatın.

### Kurulumu Doğrulama
```bash
docker --version
```

## Aşama 2: Temel Komutlar

### 1. Image İşlemleri

#### Docker Hub'dan image indirme
```bash
docker pull ubuntu
docker pull nginx
docker pull python:3.9
```

#### Bilgisayarında yüklü image'ları listeleme
```bash
docker images
```

#### Image detaylarını görme
```bash
docker inspect ubuntu
```

#### Image silme
```bash
docker rmi ubuntu
```

### 2. Container Oluşturma ve Başlatma

#### Basit container çalıştırma (başlar ve hemen durur)
```bash
docker run ubuntu echo "Merhaba Docker"
```

#### İnteraktif terminal ile container çalıştırma
```bash
docker run -it ubuntu /bin/bash
```

#### Arka planda çalışan container
```bash
docker run -d --name webserver nginx
```

#### Port yönlendirmesi ile (host:container)
```bash
docker run -d -p 8080:80 --name web nginx
```

#### Environment variable ile
```bash
docker run -d -e DATABASE_URL=localhost --name app python:3.9
```

### 3. Çalışan Container'ları Yönetme

#### Tüm çalışan container'ları listeleme
```bash
docker ps
```

#### Tüm container'ları listeleme (durdurulmuş dahil)
```bash
docker ps -a
```

#### Container'ı durdurma
```bash
docker stop webserver
```

#### Container'ı başlatma
```bash
docker start webserver
```

#### Container'ı silme (önce durdurmalısınız)
```bash
docker stop webserver
docker rm webserver
```

#### Container'ın loglarını görme
```bash
docker logs webserver
```

#### Container'ın loglarını canlı takip etme
```bash
docker logs -f webserver
```

## Notlar

### 1. İnteraktif Terminal ile Container Çalıştırma
```bash
docker run -it ubuntu /bin/bash
```

Bu komut, Ubuntu container'ının içine doğrudan girmenizi sağlar. Adeta o container'ın içinde bir terminal açılır.

**Ayrıntılı açıklama:**

- `-i` (interactive): Container'ın giriş akışını açık tutup sizin yazı yazmanızı sağlar
- `-t` (tty): Terminal oluşturur, böylece komut yazabilirsiniz
- `/bin/bash`: Container'da bash shell'ini çalıştırır

**Pratik örnek:**
```bash
docker run -it ubuntu /bin/bash
# Artık container içerisindesiniz, prompt şöyle görünür: root@a1b2c3d4e5f6:/#

# Container içinde komut yazabilirsiniz
root@a1b2c3d4e5f6:/# ls
root@a1b2c3d4e5f6:/# pwd
root@a1b2c3d4e5f6:/# apt-get update

# Container'dan çıkış (exit veya Ctrl+D)
root@a1b2c3d4e5f6:/# exit
```

**Önemli fark:**
```bash
# İnteraktif - sizin yazı yazmanız gerekir
docker run -it ubuntu /bin/bash

# İnteraktif olmayan - sadece komutu çalıştırıp çıkar
docker run ubuntu echo "Merhaba"
```

### 2. -d Tag'inin Anlamı (Detached Mode)
`-d` = detached (ayırılmış) modda çalıştır

Container'ı arka planda çalıştırır, terminali bloke etmez.

**Örnek:**
```bash
# -d OLMADAN (ön plan)
docker run nginx
# Terminal meşgul olur, loglar ekrana akar, çıkmak için Ctrl+C

# -d İLE (arka plan)
docker run -d nginx
# Hemen container ID'sini yazdırıp serbest bırakır
# Terminal komut almaya hazır olur
# 6f8c9d2e1a4b5c7f
```

**Pratikte ne demek:**
```bash
# Arka planda web sunucusu çalışsın
docker run -d --name webserver nginx

# Terminali kullanmaya devam edebilirim
docker ps
docker logs webserver
docker stop webserver
```

**Analoji:** Bir kahve dükkanı gibi düşünün:

- `-d` olmadan: Barista sizin siparişinizi hazırlarken sadece sizle uğraşır (terminal meşgul)
- `-d` ile: Barista siparişinizi alır, "hazır olduğunda size haber verir" (arka plan, terminal serbest)

### 3. -f Tag'inin Anlamı (Follow)
`-f` = follow (takip et)

Logları canlı olarak izlemeyi sağlar. Container'dan yeni log satırları geldiğinde hemen görürsünüz.

**Örnek:**
```bash
# -f OLMADAN (anlık snapshot)
docker logs webserver
# Şu ana kadarki logları gösterir ve çıkar
# 172.17.0.1 - - [24/Jan/2026] "GET / HTTP/1.1" 200
# 172.17.0.1 - - [24/Jan/2026] "GET /about HTTP/1.1" 200
# (komut biter)

# -f İLE (canlı takip)
docker logs -f webserver
# Şu ana kadarki logları gösterir ve BEKLER
# 172.17.0.1 - - [24/Jan/2026] "GET / HTTP/1.1" 200
# 172.17.0.1 - - [24/Jan/2026] "GET /about HTTP/1.1" 200
# (yeni request geldiğinde hemen görürsünüz)
# 172.17.0.1 - - [24/Jan/2026] "GET /contact HTTP/1.1" 200
# (Ctrl+C ile çıkabilirsiniz)
```

**Pratikte:**
```bash
# Terminal 1: Web sunucusunu arka planda başlat
docker run -d --name webserver nginx

# Terminal 2: Logları canlı takip et
docker logs -f webserver

# Terminal 3 (veya başka bir tarayıcı): İstekler gönder
# http://localhost:8080

# Terminal 2'de anlık logları göreceksiniz!
```

## Özet Tablosu

| Komut | Anlamı | Örnek |
|-------|--------|-------|
| `-i` | Input akışını açık tut | Container'a yazı yazarsınız |
| `-t` | Terminal oluştur | Prompt görürsünüz |
| `-it` | İnteraktif terminal | Doğrudan container'a girersiniz |
| `-d` | Arka planda çalıştır | Terminal serbest kalır |
| `-f` | Logları canlı takip et | Yeni loglar otomatik görünür |

## --name Tag'inin Anlamı

Container'a bir isim vermenizi sağlar. Böylece container'ı yönetirken ID yerine bu ismi kullanabilirsiniz.

### Örnek: Neden Gerekli?
```bash
# --name OLMADAN
docker run -d nginx
# Docker otomatik bir ID atar: 6f8c9d2e1a4b5c7f9a2b3c4d5e6f7g8h

# Sonra container'ı durdurmak istediğinizde
docker stop 6f8c9d2e1a4b5c7f9a2b3c4d5e6f7g8h  # Uzun ve karışık

# --name İLE
docker run -d --name webserver nginx
# Container'a "webserver" adını verdik

# Sonra container'ı durdurmak istediğinizde
docker stop webserver  # Çok daha basit ve hatırlanması kolay
```

### Pratik Örnekler
```bash
# Web sunucusu
docker run -d --name webserver nginx

# Veritabanı
docker run -d --name database postgres

# Python uygulaması
docker run -d --name app python:3.9

# Tüm container'ları listele
docker ps
# NAMES sütununda göreceksiniz:
# webserver, database, app
```

### Container'ı İsmi ile Yönetme
```bash
# Logları görme (isimle)
docker logs webserver

# Logları canlı takip etme (isimle)
docker logs -f webserver

# Container'ı durdurma (isimle)
docker stop webserver

# Container'ı başlatma (isimle)
docker start webserver

# Container'ı silme (isimle)
docker rm webserver

# Container detaylarını görme (isimle)
docker inspect webserver
```

### İsim Vermeden Ne Olur?
```bash
# İsim vermediğinizde Docker otomatik atanır
docker run -d nginx

docker ps
# NAMES sütununda: happy_einstein, jolly_pasteur vb. random isimler

# Bu isimleri kullanabilirsiniz ama:
docker stop happy_einstein  # Karışık ve hatırlanması zor
```

### Önemli: Her Container'ın Ismi Eşsiz Olmalı
```bash
# Aynı isimle iki container oluşturamazsınız
docker run -d --name web nginx
docker run -d --name web nginx
# HATA: name is already in use

# Çözüm: Farklı isimler kullanın
docker run -d --name web1 nginx
docker run -d --name web2 nginx
docker run -d --name web3 nginx
```

### Özet

| Kullanım | Açıklama |
|----------|----------|
| `docker run -d nginx` | İsim verilmez, random atanır |
| `docker run -d --name web nginx` | İsim "web" olarak atanır |
| `docker stop web` | "web" adlı container durur |
| `docker logs web` | "web" adlı container'ın loglarını gösterir |

**Kısaca:** `--name` tag'i container'a insan tarafından okunabilir bir isim verir, böylece yönetmesi daha kolay ve basit olur.

## docker exec Nedir?

Zaten çalışan bir container'ın içinde komut çalıştırmanızı sağlar. Container'ı durdurmadan veya yeniden başlatmadan içerisinde işlem yapabilirsiniz.

### docker run vs docker exec Farkı
```bash
# docker run - YENİ container oluşturur
docker run ubuntu echo "Merhaba"
# 1. Yeni container oluşturur
# 2. Komut çalıştırır
# 3. Container kapanır

# docker exec - VAROLAN container'da komut çalıştırır
docker exec mycontainer echo "Merhaba"
# 1. "mycontainer" adlı çalışan container'ı bulur
# 2. İçinde komut çalıştırır
# 3. Container çalışmaya devam eder
```

### Pratik Örnek
```bash
# 1. Postgres container'ını başlat
docker run -d \
  --name mydb \
  -e POSTGRES_PASSWORD=mysecret \
  postgres:13

# 2. Container çalışıyor mu kontrol et
docker ps
# mydb görülecek (çalışıyor)

# 3. docker exec ile container'ın içinde psql komutunu çalıştır
docker exec mydb psql -U postgres -c "CREATE DATABASE myapp;"

# 4. Container hala çalışıyor
docker ps
# mydb hala görülecek
```

### İnteraktif Terminal ile Kullanım
```bash
# Container'a gir ve terminal aç (docker run gibi)
docker exec -it mydb bash

# Şimdi container'ın içerisindesiniz
root@container:/# ls
root@container:/# pwd

# Çıkış
root@container:/# exit
```

`-it` parametreleri:

- `-i` = interaktif (input alabilirsiniz)
- `-t` = terminal (prompt görebilirsiniz)

### Sık Kullanılan Örnekler

#### 1. Postgres Veritabanında Komut Çalıştırma
```bash
# Container'da SQL komutunu çalıştır
docker exec mydb psql -U postgres -c "SELECT * FROM users;"

# SQL dosyasını çalıştır
docker exec mydb psql -U postgres -f /backup/restore.sql
```

#### 2. Container'ın İçine Girerek İşlem Yapma
```bash
# Ubuntu container'ına gir
docker exec -it mycontainer bash

# Veya sh (eğer bash yoksa)
docker exec -it mycontainer sh
```

#### 3. Python Uygulaması İçinde Script Çalıştırma
```bash
# Çalışan Python container'da Python scripti çalıştır
docker exec myapp python script.py

# Veya Python komutunu doğrudan çalıştır
docker exec myapp python -c "print('Merhaba')"
```

#### 4. Dosya İçeriğini Kontrol Etme
```bash
# Container'da dosyayı görüntüle
docker exec myapp cat /app/config.json

# Dosya listesi
docker exec myapp ls -la /app
```

### Gerçek Senaryo: Web Uygulaması + Veritabanı
```bash
# 1. Postgres başlat
docker run -d --name db \
  -e POSTGRES_PASSWORD=secret \
  -p 5432:5432 \
  postgres:13

# 2. Uygulama başlat
docker run -d --name app \
  -p 8000:8000 \
  myapp:latest

# 3. Uygulamayı durdurmadan Postgres'te veritabanı oluştur
docker exec db psql -U postgres -c "CREATE DATABASE myapp;"

# 4. Container'a girerek debug yapma
docker exec -it app bash
root@container:/# cat /var/log/app.log

# 5. Postgres'te veri kontrol etme
docker exec db psql -U postgres -d myapp -c "SELECT COUNT(*) FROM users;"
```

### docker exec vs docker run Karşılaştırması

| Durum | Komut | Yeni container oluşturmak | docker run | docker exec | Container'a girmek | docker run -it veya docker exec -it | Komut çalıştırıp çıkmak | docker exec (daha iyisi) |

### Özet Örnek
```bash
# Senaryo: Postgres çalışıyor, bir kullanıcı oluşturmak istiyorum

# ❌ Yanlış (container'ı durdurur, yeniden başlatır)
docker run -d --name newdb \
  -e POSTGRES_PASSWORD=secret \
  postgres:13
# Verileri kaybedersin!

# ✅ Doğru (container'ı çalışmaya devam ettirir)
docker exec mydb psql -U postgres -c "CREATE USER newuser WITH PASSWORD 'newpass';"
# Verileri korusan!
```

**Kısaca:** `docker exec` zaten çalışan bir container'ın içinde komut çalıştırır. Container'ı durdurmadan işlem yapmak istediğinizde kullanılır.